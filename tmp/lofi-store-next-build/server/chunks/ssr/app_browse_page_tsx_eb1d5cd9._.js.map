{"version":3,"sources":["../../../../../app/browse/page.tsx"],"sourcesContent":["'use client'\n\nimport { Navbar } from '@/components/Navbar'\nimport { useCart } from '@/contexts/CartContext'\nimport { useAudioPlayer, Track } from '@/contexts/AudioPlayerContext'\nimport Link from 'next/link'\nimport { useState, useMemo, useEffect, useCallback, useRef } from 'react'\nimport { useRouter, useSearchParams } from 'next/navigation'\nimport artistsData from '@/data/artists.json'\nimport albumsData from '@/data/albums.json'\n\nconst { artists } = artistsData\nconst { albums } = albumsData\n\n// Extract unique values for filters\nconst allGenres = [...new Set(artists.map(a => a.genre))]\nconst allMoods = [...new Set(albums.flatMap(a => a.tags))]\nconst allYears = [...new Set(albums.map(a => a.year))].sort((a, b) => b - a)\n\ntype SortOption = 'newest' | 'oldest' | 'price-low' | 'price-high' | 'title-az' | 'title-za'\ntype ViewMode = 'grid' | 'list'\n\nexport default function BrowsePage() {\n  const router = useRouter()\n  const searchParams = useSearchParams()\n  const { addItem, isInCart } = useCart()\n  const { playTrack } = useAudioPlayer()\n  \n  // Initialize filter states from URL params\n  const [selectedArtist, setSelectedArtist] = useState<string>(searchParams.get('artist') || '')\n  const [selectedGenre, setSelectedGenre] = useState<string>(searchParams.get('genre') || '')\n  const [selectedMood, setSelectedMood] = useState<string>(searchParams.get('mood') || '')\n  const [selectedYear, setSelectedYear] = useState<string>(searchParams.get('year') || '')\n  const [sortBy, setSortBy] = useState<SortOption>('newest')\n  const [showFilters, setShowFilters] = useState(false)\n  \n  // View mode with localStorage persistence\n  const [viewMode, setViewMode] = useState<ViewMode>('grid')\n  \n  // Keyboard navigation state\n  const [selectedIndex, setSelectedIndex] = useState<number>(-1)\n  const albumRefs = useRef<(HTMLDivElement | null)[]>([])\n  \n  // Load view mode from localStorage on mount\n  useEffect(() => {\n    const savedViewMode = localStorage.getItem('lofi-browse-view-mode') as ViewMode\n    if (savedViewMode && (savedViewMode === 'grid' || savedViewMode === 'list')) {\n      setViewMode(savedViewMode)\n    }\n  }, [])\n  \n  // Save view mode to localStorage\n  const handleViewModeChange = (mode: ViewMode) => {\n    setViewMode(mode)\n    localStorage.setItem('lofi-browse-view-mode', mode)\n  }\n  \n  // Update URL when filters change\n  const updateURL = useCallback((artist: string, genre: string, mood: string, year: string) => {\n    const params = new URLSearchParams()\n    if (artist) params.set('artist', artist)\n    if (genre) params.set('genre', genre)\n    if (mood) params.set('mood', mood)\n    if (year) params.set('year', year)\n    \n    const queryString = params.toString()\n    router.push(queryString ? `/browse?${queryString}` : '/browse', { scroll: false })\n  }, [router])\n  \n  // Filter change handlers that update URL\n  const handleArtistChange = (value: string) => {\n    setSelectedArtist(value)\n    updateURL(value, selectedGenre, selectedMood, selectedYear)\n  }\n  \n  const handleGenreChange = (value: string) => {\n    setSelectedGenre(value)\n    updateURL(selectedArtist, value, selectedMood, selectedYear)\n  }\n  \n  const handleMoodChange = (value: string) => {\n    setSelectedMood(value)\n    updateURL(selectedArtist, selectedGenre, value, selectedYear)\n  }\n  \n  const handleYearChange = (value: string) => {\n    setSelectedYear(value)\n    updateURL(selectedArtist, selectedGenre, selectedMood, value)\n  }\n\n  // Filter and sort albums\n  const filteredAlbums = useMemo(() => {\n    let result = [...albums]\n    \n    // Apply filters\n    if (selectedArtist) {\n      result = result.filter(a => a.artistId === selectedArtist)\n    }\n    if (selectedGenre) {\n      const artistsInGenre = artists.filter(a => a.genre === selectedGenre).map(a => a.id)\n      result = result.filter(a => artistsInGenre.includes(a.artistId))\n    }\n    if (selectedMood) {\n      result = result.filter(a => a.tags.includes(selectedMood))\n    }\n    if (selectedYear) {\n      result = result.filter(a => a.year === parseInt(selectedYear))\n    }\n    \n    // Apply sorting\n    switch (sortBy) {\n      case 'newest':\n        result.sort((a, b) => b.year - a.year)\n        break\n      case 'oldest':\n        result.sort((a, b) => a.year - b.year)\n        break\n      case 'price-low':\n        result.sort((a, b) => a.price - b.price)\n        break\n      case 'price-high':\n        result.sort((a, b) => b.price - a.price)\n        break\n      case 'title-az':\n        result.sort((a, b) => a.title.localeCompare(b.title))\n        break\n      case 'title-za':\n        result.sort((a, b) => b.title.localeCompare(a.title))\n        break\n    }\n    \n    return result\n  }, [selectedArtist, selectedGenre, selectedMood, selectedYear, sortBy])\n\n  // Keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Don't handle if typing in an input\n      if (e.target instanceof HTMLInputElement || e.target instanceof HTMLTextAreaElement) {\n        return\n      }\n      \n      if (e.key === 'j' || e.key === 'ArrowDown') {\n        e.preventDefault()\n        setSelectedIndex(prev => {\n          const next = Math.min(prev + 1, filteredAlbums.length - 1)\n          albumRefs.current[next]?.scrollIntoView({ behavior: 'smooth', block: 'nearest' })\n          return next\n        })\n      } else if (e.key === 'k' || e.key === 'ArrowUp') {\n        e.preventDefault()\n        setSelectedIndex(prev => {\n          const next = Math.max(prev - 1, 0)\n          albumRefs.current[next]?.scrollIntoView({ behavior: 'smooth', block: 'nearest' })\n          return next\n        })\n      } else if (e.key === 'Enter' && selectedIndex >= 0 && selectedIndex < filteredAlbums.length) {\n        e.preventDefault()\n        router.push(`/albums/${filteredAlbums[selectedIndex].slug}`)\n      }\n    }\n    \n    window.addEventListener('keydown', handleKeyDown)\n    return () => window.removeEventListener('keydown', handleKeyDown)\n  }, [filteredAlbums, selectedIndex, router])\n  \n  // Reset selection when filters change\n  useEffect(() => {\n    setSelectedIndex(-1)\n  }, [selectedArtist, selectedGenre, selectedMood, selectedYear])\n\n  const clearFilters = () => {\n    setSelectedArtist('')\n    setSelectedGenre('')\n    setSelectedMood('')\n    setSelectedYear('')\n    router.push('/browse', { scroll: false })\n  }\n\n  const activeFilterCount = [selectedArtist, selectedGenre, selectedMood, selectedYear].filter(Boolean).length\n\n  const handleAddToCart = (album: typeof albums[0]) => {\n    const artist = artists.find(a => a.id === album.artistId)\n    addItem({\n      id: album.id,\n      type: 'album',\n      title: album.title,\n      artistName: album.artistName,\n      artistSlug: artist?.slug || '',\n      albumSlug: album.slug,\n      price: album.price,\n      coverGradient: {\n        primary: artist?.accentColor || '#9333EA',\n        secondary: artist?.secondaryColor || '#06B6D4',\n      },\n    })\n  }\n\n  const handlePlayPreview = (album: typeof albums[0]) => {\n    const artist = artists.find(a => a.id === album.artistId)\n    const firstTrack = album.tracks[0]\n    \n    const track: Track = {\n      id: `${album.id}-${firstTrack.number}`,\n      title: firstTrack.title,\n      artistName: album.artistName,\n      albumTitle: album.title,\n      albumSlug: album.slug,\n      duration: firstTrack.duration,\n      coverGradient: {\n        primary: artist?.accentColor || '#9333EA',\n        secondary: artist?.secondaryColor || '#06B6D4',\n      },\n    }\n    \n    playTrack(track, true)\n  }\n\n  return (\n    <div className=\"min-h-screen bg-zinc-950 relative overflow-hidden\">\n      {/* Ambient background */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute top-0 left-1/4 w-96 h-96 bg-amber-500/10 rounded-full blur-[128px]\" />\n        <div className=\"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-[128px]\" />\n        <div className=\"absolute inset-0 bg-[repeating-linear-gradient(0deg,transparent,transparent_2px,rgba(0,0,0,0.03)_2px,rgba(0,0,0,0.03)_4px)]\" />\n      </div>\n\n      <Navbar />\n\n      <main className=\"relative z-10 pt-24 pb-20 px-4\">\n        <div className=\"max-w-7xl mx-auto\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-4xl font-bold text-white mb-2\">Browse Tapes</h1>\n            <p className=\"text-zinc-400\">\n              Explore our collection of {albums.length} albums from {artists.length} artists\n            </p>\n            <p className=\"text-xs text-zinc-600 mt-2\">\n              Use <kbd className=\"px-1.5 py-0.5 bg-zinc-800 rounded text-zinc-400\">j</kbd> / <kbd className=\"px-1.5 py-0.5 bg-zinc-800 rounded text-zinc-400\">k</kbd> to navigate, <kbd className=\"px-1.5 py-0.5 bg-zinc-800 rounded text-zinc-400\">Enter</kbd> to view\n            </p>\n          </div>\n\n          {/* Filters Section */}\n          <div className=\"mb-8\">\n            {/* Mobile filter toggle */}\n            <button\n              onClick={() => setShowFilters(!showFilters)}\n              className=\"lg:hidden flex items-center justify-between w-full px-4 py-3 bg-zinc-900 border border-zinc-800 rounded-xl text-white mb-4\"\n            >\n              <span className=\"flex items-center gap-2\">\n                <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\" />\n                </svg>\n                Filters\n                {activeFilterCount > 0 && (\n                  <span className=\"px-2 py-0.5 bg-amber-500 text-black text-xs font-bold rounded-full\">\n                    {activeFilterCount}\n                  </span>\n                )}\n              </span>\n              <svg className={`w-5 h-5 transition-transform ${showFilters ? 'rotate-180' : ''}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n              </svg>\n            </button>\n\n            {/* Filter Chips */}\n            <div className={`space-y-4 ${showFilters ? 'block' : 'hidden lg:block'}`}>\n              {/* Artists */}\n              <div>\n                <label className=\"text-xs font-medium text-zinc-500 uppercase tracking-wide mb-2 block\">Artist</label>\n                <div className=\"flex flex-wrap gap-2\">\n                  <button\n                    onClick={() => handleArtistChange('')}\n                    className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${\n                      !selectedArtist \n                        ? 'bg-amber-500 text-black' \n                        : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white'\n                    }`}\n                  >\n                    All\n                  </button>\n                  {artists.map((artist) => (\n                    <button\n                      key={artist.id}\n                      onClick={() => handleArtistChange(selectedArtist === artist.id ? '' : artist.id)}\n                      className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${\n                        selectedArtist === artist.id \n                          ? 'bg-amber-500 text-black' \n                          : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white'\n                      }`}\n                    >\n                      {artist.name}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Genres */}\n              <div>\n                <label className=\"text-xs font-medium text-zinc-500 uppercase tracking-wide mb-2 block\">Genre</label>\n                <div className=\"flex flex-wrap gap-2\">\n                  <button\n                    onClick={() => handleGenreChange('')}\n                    className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${\n                      !selectedGenre \n                        ? 'bg-purple-500 text-white' \n                        : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white'\n                    }`}\n                  >\n                    All\n                  </button>\n                  {allGenres.map((genre) => (\n                    <button\n                      key={genre}\n                      onClick={() => handleGenreChange(selectedGenre === genre ? '' : genre)}\n                      className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${\n                        selectedGenre === genre \n                          ? 'bg-purple-500 text-white' \n                          : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white'\n                      }`}\n                    >\n                      {genre}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Moods */}\n              <div>\n                <label className=\"text-xs font-medium text-zinc-500 uppercase tracking-wide mb-2 block\">Mood</label>\n                <div className=\"flex flex-wrap gap-2\">\n                  <button\n                    onClick={() => handleMoodChange('')}\n                    className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${\n                      !selectedMood \n                        ? 'bg-cyan-500 text-black' \n                        : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white'\n                    }`}\n                  >\n                    All\n                  </button>\n                  {allMoods.map((mood) => (\n                    <button\n                      key={mood}\n                      onClick={() => handleMoodChange(selectedMood === mood ? '' : mood)}\n                      className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${\n                        selectedMood === mood \n                          ? 'bg-cyan-500 text-black' \n                          : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white'\n                      }`}\n                    >\n                      {mood}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Years */}\n              <div>\n                <label className=\"text-xs font-medium text-zinc-500 uppercase tracking-wide mb-2 block\">Year</label>\n                <div className=\"flex flex-wrap gap-2\">\n                  <button\n                    onClick={() => handleYearChange('')}\n                    className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${\n                      !selectedYear \n                        ? 'bg-green-500 text-black' \n                        : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white'\n                    }`}\n                  >\n                    All\n                  </button>\n                  {allYears.map((year) => (\n                    <button\n                      key={year}\n                      onClick={() => handleYearChange(selectedYear === String(year) ? '' : String(year))}\n                      className={`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${\n                        selectedYear === String(year) \n                          ? 'bg-green-500 text-black' \n                          : 'bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white'\n                      }`}\n                    >\n                      {year}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              {/* Active Filters Summary & Clear */}\n              {activeFilterCount > 0 && (\n                <div className=\"flex items-center gap-2 pt-2\">\n                  <span className=\"text-xs text-zinc-500\">{activeFilterCount} filter{activeFilterCount !== 1 ? 's' : ''} active</span>\n                  <button\n                    onClick={clearFilters}\n                    className=\"text-xs text-red-400 hover:text-red-300 flex items-center gap-1 transition-colors\"\n                  >\n                    <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                    Clear all\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Controls Bar: Sort & View Toggle */}\n          <div className=\"flex items-center justify-between mb-6\">\n            <p className=\"text-sm text-zinc-500\">\n              Showing {filteredAlbums.length} of {albums.length} albums\n            </p>\n            \n            <div className=\"flex items-center gap-4\">\n              {/* View Toggle */}\n              <div className=\"flex items-center gap-1 bg-zinc-900 border border-zinc-800 rounded-lg p-1\">\n                <button\n                  onClick={() => handleViewModeChange('grid')}\n                  className={`p-2 rounded transition-colors ${\n                    viewMode === 'grid' \n                      ? 'bg-zinc-700 text-white' \n                      : 'text-zinc-500 hover:text-white'\n                  }`}\n                  title=\"Grid view\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path d=\"M3 3h8v8H3V3zm0 10h8v8H3v-8zm10-10h8v8h-8V3zm0 10h8v8h-8v-8z\"/>\n                  </svg>\n                </button>\n                <button\n                  onClick={() => handleViewModeChange('list')}\n                  className={`p-2 rounded transition-colors ${\n                    viewMode === 'list' \n                      ? 'bg-zinc-700 text-white' \n                      : 'text-zinc-500 hover:text-white'\n                  }`}\n                  title=\"List view\"\n                >\n                  <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path d=\"M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z\"/>\n                  </svg>\n                </button>\n              </div>\n\n              {/* Sort */}\n              <select\n                value={sortBy}\n                onChange={(e) => setSortBy(e.target.value as SortOption)}\n                className=\"px-4 py-2 bg-zinc-900 border border-zinc-800 rounded-lg text-white text-sm focus:border-amber-500 focus:ring-1 focus:ring-amber-500 outline-none cursor-pointer\"\n              >\n                <option value=\"newest\">Newest First</option>\n                <option value=\"oldest\">Oldest First</option>\n                <option value=\"price-low\">Price: Low to High</option>\n                <option value=\"price-high\">Price: High to Low</option>\n                <option value=\"title-az\">Title: A-Z</option>\n                <option value=\"title-za\">Title: Z-A</option>\n              </select>\n            </div>\n          </div>\n\n          {/* Albums Display */}\n          {filteredAlbums.length === 0 ? (\n            <div className=\"text-center py-20\">\n              <div className=\"w-20 h-20 bg-zinc-900 rounded-2xl flex items-center justify-center mx-auto mb-4\">\n                <svg className=\"w-10 h-10 text-zinc-700\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                </svg>\n              </div>\n              <h3 className=\"text-xl font-semibold text-white mb-2\">No albums found</h3>\n              <p className=\"text-zinc-500 mb-6\">Try adjusting your filters</p>\n              <button\n                onClick={clearFilters}\n                className=\"px-6 py-3 bg-amber-500 text-black font-semibold rounded-xl hover:bg-amber-400 transition-colors\"\n              >\n                Clear Filters\n              </button>\n            </div>\n          ) : viewMode === 'grid' ? (\n            /* Grid View */\n            <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6\">\n              {filteredAlbums.map((album, index) => {\n                const artist = artists.find(a => a.id === album.artistId)\n                const inCart = isInCart(album.id)\n                const isSelected = index === selectedIndex\n                \n                return (\n                  <div \n                    key={album.id} \n                    className=\"group album-card\"\n                    ref={el => { albumRefs.current[index] = el }}\n                  >\n                    {/* Album Cover */}\n                    <div className={`relative aspect-square mb-4 ${isSelected ? 'ring-2 ring-amber-500 ring-offset-2 ring-offset-zinc-950 rounded-xl' : ''}`}>\n                      <Link href={`/albums/${album.slug}`}>\n                        <div \n                          className=\"w-full h-full rounded-xl flex items-center justify-center relative overflow-hidden shadow-lg cover-glow\"\n                          style={{ \n                            background: artist \n                              ? `linear-gradient(135deg, ${artist.accentColor}80, ${artist.secondaryColor}80)` \n                              : 'linear-gradient(135deg, #9333EA80, #06B6D480)'\n                          }}\n                        >\n                          {/* Cassette decoration */}\n                          <div className=\"w-20 h-12 bg-zinc-900/70 rounded-lg flex items-center justify-center gap-2\">\n                            <div className=\"w-5 h-5 border-2 border-zinc-600 rounded-full\" />\n                            <div className=\"w-5 h-5 border-2 border-zinc-600 rounded-full\" />\n                          </div>\n                          \n                          {/* VHS overlay */}\n                          <div className=\"absolute inset-0 bg-[repeating-linear-gradient(0deg,transparent,transparent_2px,rgba(255,255,255,0.03)_2px,rgba(255,255,255,0.03)_4px)]\" />\n                        </div>\n                      </Link>\n\n                      {/* Hover overlay with actions */}\n                      <div className=\"absolute inset-0 bg-black/60 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3\">\n                        <button\n                          onClick={() => handlePlayPreview(album)}\n                          className=\"w-12 h-12 bg-white rounded-full flex items-center justify-center interactive-scale shadow-lg\"\n                          title=\"Play preview\"\n                        >\n                          <svg className=\"w-5 h-5 text-zinc-900 ml-0.5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path d=\"M8 5v14l11-7z\"/>\n                          </svg>\n                        </button>\n                        <button\n                          onClick={() => handleAddToCart(album)}\n                          className={`w-12 h-12 rounded-full flex items-center justify-center interactive-scale shadow-lg ${\n                            inCart \n                              ? 'bg-amber-500 text-black' \n                              : 'bg-zinc-800 text-white hover:bg-zinc-700'\n                          }`}\n                          title={inCart ? 'In cart' : 'Add to cart'}\n                          disabled={inCart}\n                        >\n                          {inCart ? (\n                            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"/>\n                            </svg>\n                          ) : (\n                            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                            </svg>\n                          )}\n                        </button>\n                      </div>\n\n                      {/* Year badge */}\n                      <div className=\"absolute top-2 right-2 px-2 py-1 bg-black/50 backdrop-blur-sm rounded-full text-xs text-white/80\">\n                        {album.year}\n                      </div>\n                    </div>\n\n                    {/* Album Info */}\n                    <Link href={`/albums/${album.slug}`}>\n                      <h3 className=\"font-semibold text-white group-hover:text-amber-500 transition-colors truncate\">\n                        {album.title}\n                      </h3>\n                    </Link>\n                    <Link \n                      href={`/artists/${artist?.slug}`}\n                      className=\"text-sm text-zinc-500 hover:text-zinc-400 transition-colors truncate block\"\n                    >\n                      {album.artistName}\n                    </Link>\n                    <div className=\"flex items-center justify-between mt-2\">\n                      <span className=\"text-sm font-semibold text-amber-500\">${album.price}</span>\n                      <div className=\"flex gap-1\">\n                        {album.tags.slice(0, 1).map((tag) => (\n                          <span key={tag} className=\"px-2 py-0.5 bg-zinc-800 text-zinc-400 text-xs rounded-full\">\n                            {tag}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          ) : (\n            /* List View */\n            <div className=\"space-y-2\">\n              {filteredAlbums.map((album, index) => {\n                const artist = artists.find(a => a.id === album.artistId)\n                const inCart = isInCart(album.id)\n                const isSelected = index === selectedIndex\n                \n                return (\n                  <div \n                    key={album.id}\n                    ref={el => { albumRefs.current[index] = el }}\n                    className={`group flex items-center gap-4 p-4 rounded-xl transition-all ${\n                      isSelected \n                        ? 'bg-zinc-800 ring-2 ring-amber-500' \n                        : 'bg-zinc-900/50 hover:bg-zinc-900'\n                    }`}\n                  >\n                    {/* Album Cover - Small */}\n                    <Link href={`/albums/${album.slug}`} className=\"shrink-0\">\n                      <div \n                        className=\"w-16 h-16 rounded-lg flex items-center justify-center relative overflow-hidden shadow-lg\"\n                        style={{ \n                          background: artist \n                            ? `linear-gradient(135deg, ${artist.accentColor}80, ${artist.secondaryColor}80)` \n                            : 'linear-gradient(135deg, #9333EA80, #06B6D480)'\n                        }}\n                      >\n                        {/* Mini cassette */}\n                        <div className=\"w-8 h-5 bg-zinc-900/70 rounded flex items-center justify-center gap-1\">\n                          <div className=\"w-2 h-2 border border-zinc-600 rounded-full\" />\n                          <div className=\"w-2 h-2 border border-zinc-600 rounded-full\" />\n                        </div>\n                      </div>\n                    </Link>\n\n                    {/* Album Info */}\n                    <div className=\"flex-1 min-w-0\">\n                      <Link href={`/albums/${album.slug}`}>\n                        <h3 className=\"font-semibold text-white group-hover:text-amber-500 transition-colors truncate\">\n                          {album.title}\n                        </h3>\n                      </Link>\n                      <div className=\"flex items-center gap-2 text-sm\">\n                        <Link \n                          href={`/artists/${artist?.slug}`}\n                          className=\"text-zinc-500 hover:text-zinc-400 transition-colors\"\n                        >\n                          {album.artistName}\n                        </Link>\n                        <span className=\"text-zinc-700\">•</span>\n                        <span className=\"text-zinc-600\">{album.year}</span>\n                        <span className=\"text-zinc-700\">•</span>\n                        <span className=\"text-zinc-600\">{album.tracks.length} tracks</span>\n                      </div>\n                      <div className=\"flex gap-1 mt-1\">\n                        {album.tags.slice(0, 3).map((tag) => (\n                          <span key={tag} className=\"px-2 py-0.5 bg-zinc-800 text-zinc-500 text-xs rounded-full\">\n                            {tag}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* Price */}\n                    <div className=\"text-right shrink-0\">\n                      <span className=\"text-lg font-bold text-amber-500\">${album.price}</span>\n                    </div>\n\n                    {/* Actions */}\n                    <div className=\"flex items-center gap-2 shrink-0\">\n                      <button\n                        onClick={() => handlePlayPreview(album)}\n                        className=\"w-10 h-10 bg-zinc-800 hover:bg-zinc-700 rounded-full flex items-center justify-center transition-colors\"\n                        title=\"Play preview\"\n                      >\n                        <svg className=\"w-4 h-4 text-white ml-0.5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path d=\"M8 5v14l11-7z\"/>\n                        </svg>\n                      </button>\n                      <button\n                        onClick={() => handleAddToCart(album)}\n                        className={`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${\n                          inCart \n                            ? 'bg-amber-500 text-black' \n                            : 'bg-zinc-800 text-white hover:bg-zinc-700'\n                        }`}\n                        title={inCart ? 'In cart' : 'Add to cart'}\n                        disabled={inCart}\n                      >\n                        {inCart ? (\n                          <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\"/>\n                          </svg>\n                        ) : (\n                          <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                          </svg>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          )}\n        </div>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}